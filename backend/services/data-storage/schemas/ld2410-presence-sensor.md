# LD2410 Presence Sensor Schema

## Description
Schema for LD2410 millimeter wave radar presence sensor data. This sensor detects human presence using millimeter wave radar technology.

## InfluxDB Measurement
**Measurement Name:** `ld2410_presence`

## Tags (Indexed)
Tags are indexed and used for filtering queries.

| Tag Name      | Type   | Description                                      | Example              |
|---------------|--------|--------------------------------------------------|----------------------|
| device_id     | string | Unique identifier for the device                 | "ld2410-001"         |
| location      | string | Physical location of the sensor                  | "room-101"           |
| zone          | string | Zone or area within location                     | "entrance"           |
| firmware_ver  | string | Firmware version of the device                   | "v1.2.3"             |

## Fields (Not Indexed)
Fields contain the actual measurement data.

| Field Name            | Type    | Unit        | Description                                    |
|-----------------------|---------|-------------|------------------------------------------------|
| presence_detected     | boolean | -           | Whether presence is detected (true/false)      |
| motion_detected       | boolean | -           | Whether motion is detected                     |
| static_presence       | boolean | -           | Whether static presence is detected            |
| distance_cm           | float   | centimeters | Distance to detected object                    |
| motion_distance_cm    | float   | centimeters | Distance to moving object                      |
| static_distance_cm    | float   | centimeters | Distance to static object                      |
| motion_energy         | integer | arbitrary   | Motion detection energy level (0-100)          |
| static_energy         | integer | arbitrary   | Static detection energy level (0-100)          |
| detection_gate        | integer | -           | Detection gate number (0-8)                    |
| rssi                  | float   | dBm         | Signal strength indicator                      |
| battery_level         | float   | percentage  | Battery level if device is battery-powered     |

## Timestamp
- **Field:** Automatically generated by InfluxDB on data ingestion
- **Precision:** Nanoseconds
- **Timezone:** UTC

## Example Data Point (Line Protocol)
```
ld2410_presence,device_id=ld2410-001,location=room-101,zone=entrance,firmware_ver=v1.2.3 presence_detected=true,motion_detected=true,static_presence=false,distance_cm=125.5,motion_distance_cm=125.5,static_distance_cm=0,motion_energy=75,static_energy=25,detection_gate=3,rssi=-45.2,battery_level=87.5 1697472000000000000
```

## Example Data Point (JSON)
```json
{
  "measurement": "ld2410_presence",
  "tags": {
    "device_id": "ld2410-001",
    "location": "room-101",
    "zone": "entrance",
    "firmware_ver": "v1.2.3"
  },
  "fields": {
    "presence_detected": true,
    "motion_detected": true,
    "static_presence": false,
    "distance_cm": 125.5,
    "motion_distance_cm": 125.5,
    "static_distance_cm": 0.0,
    "motion_energy": 75,
    "static_energy": 25,
    "detection_gate": 3,
    "rssi": -45.2,
    "battery_level": 87.5
  },
  "timestamp": 1697472000000000000
}
```

## Indexing Strategy
- **Tags are automatically indexed** in InfluxDB for fast filtering
- **Device_id** is the primary filter for device-specific queries
- **Location and zone** enable spatial filtering
- **Firmware_ver** allows version-specific analysis

## Data Retention
- **Raw Data:** 30 days (configurable)
- **1-minute aggregates:** 90 days
- **1-hour aggregates:** 365 days
- **Daily aggregates:** 5 years

## Common Queries
See `queries/ld2410-examples.flux` for example queries.
