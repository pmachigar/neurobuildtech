# NeuroBuildTech Backend Security Configuration
# Copy this file to .env and fill in your values

# ============================================
# JWT Configuration
# ============================================
JWT_SECRET=change-this-secret-in-production-use-long-random-string
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# ============================================
# OAuth2/OIDC Configuration
# ============================================
OAUTH2_ENABLED=false
OAUTH2_PROVIDER=keycloak
OAUTH2_CLIENT_ID=your-client-id
OAUTH2_CLIENT_SECRET=your-client-secret
OAUTH2_ISSUER_URL=https://auth.provider.com/realms/neurobuildtech
OAUTH2_REDIRECT_URI=https://app.neurobuildtech.com/auth/callback

# ============================================
# HashiCorp Vault Configuration
# ============================================
VAULT_ADDR=https://vault.neurobuildtech.local:8200
VAULT_TOKEN=your-vault-token
VAULT_NAMESPACE=neurobuildtech

# ============================================
# Database Configuration
# ============================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=neurobuildtech
DB_USER=neurobuild_user
DB_PASSWORD=change-this-password
DB_SSL=true
DB_POOL_MIN=2
DB_POOL_MAX=10

# ============================================
# Redis Configuration
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=change-this-password
REDIS_DB=0
REDIS_TLS=true

# ============================================
# MQTT Configuration
# ============================================
MQTT_BROKER=mqtt.neurobuildtech.com
MQTT_PORT=8883
MQTT_USERNAME=mqtt_user
MQTT_PASSWORD=change-this-password
MQTT_CLIENT_ID=backend-service
MQTT_TLS=true
MQTT_CA_CERT=/path/to/ca.crt
MQTT_CLIENT_CERT=/path/to/client.crt
MQTT_CLIENT_KEY=/path/to/client.key

# ============================================
# Rate Limiting Configuration
# ============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL=false
RATE_LIMIT_SKIP_FAILED=false

# ============================================
# DDoS Protection Configuration
# ============================================
DDOS_THRESHOLD=1000
DDOS_BLOCK_DURATION=3600000
DDOS_WINDOW_MS=60000

# ============================================
# Session Configuration
# ============================================
SESSION_SECRET=change-this-session-secret
SESSION_TIMEOUT=1800000
SESSION_COOKIE_NAME=neurobuildtech_session
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTP_ONLY=true
SESSION_COOKIE_SAME_SITE=strict

# ============================================
# CSRF Protection Configuration
# ============================================
CSRF_SECRET=change-this-csrf-secret
CSRF_TOKEN_LENGTH=32
CSRF_COOKIE_NAME=_csrf
CSRF_HEADER_NAME=x-csrf-token

# ============================================
# Security Headers Configuration
# ============================================
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_ENABLED=true
CSP_POLICY=default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'
REFERRER_POLICY=strict-origin-when-cross-origin

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE=/var/log/neurobuildtech/backend.log
AUDIT_LOG_ENABLED=true
AUDIT_LOG_FILE=/var/log/neurobuildtech/audit.log

# ============================================
# Monitoring Configuration
# ============================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_ENABLED=true

# ============================================
# Email Configuration (for notifications)
# ============================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=notifications@neurobuildtech.com
SMTP_PASSWORD=change-this-password
SMTP_FROM=notifications@neurobuildtech.com
SMTP_TLS=true

# ============================================
# Backup Configuration
# ============================================
BACKUP_ENABLED=true
BACKUP_DIRECTORY=/var/backups/neurobuildtech
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_ENABLED=true
BACKUP_ENCRYPTION_KEY=change-this-backup-encryption-key

# ============================================
# Certificate Configuration
# ============================================
CERT_DIRECTORY=/etc/neurobuildtech/certs
CA_CERT_PATH=/etc/neurobuildtech/certs/ca/ca.crt
CA_KEY_PATH=/etc/neurobuildtech/certs/ca/ca.key
CERT_VALIDITY_DAYS=365
CERT_AUTO_RENEW=true
CERT_RENEWAL_THRESHOLD_DAYS=30

# ============================================
# Application Configuration
# ============================================
NODE_ENV=production
PORT=3000
HOST=0.0.0.0
API_VERSION=v1
BASE_URL=https://api.neurobuildtech.com

# ============================================
# Feature Flags
# ============================================
ENABLE_MFA=true
ENABLE_OAUTH2=false
ENABLE_DEVICE_AUTH=true
ENABLE_API_KEYS=true
ENABLE_AUDIT_LOGGING=true
ENABLE_RATE_LIMITING=true
ENABLE_DDOS_PROTECTION=true

# ============================================
# Development/Testing
# ============================================
# Uncomment for development
# NODE_ENV=development
# LOG_LEVEL=debug
# RATE_LIMIT_MAX_REQUESTS=1000
# DB_SSL=false
# REDIS_TLS=false
